import{d as k,o as P,c as n,a as t,b,r as u,e as i,F as C,f as U,w as j,g as m,v,h as f,t as y,i as V,j as B,u as x,R as N,k as r,_ as h}from"./index-DZl8BYRz.js";const M={class:"projects-page"},$={class:"page-header"},D={key:0,class:"loading"},F={key:1,class:"empty-state"},L={key:2,class:"projects-grid"},R={class:"project-header"},S={class:"project-meta"},T={key:0,class:"meta-item"},_={class:"meta-item"},q={class:"project-actions"},A=["onClick"],E={class:"modal"},I={class:"form-group"},z={class:"form-group"},G={class:"form-group"},H={class:"form-actions"},J=k({__name:"ProjectsView",setup(K){const d=u([]),p=u(!0),a=u(!1),o=u({name:"",repositoryUrl:"",defaultBranch:"main"});async function c(){p.value=!0;try{const l=await f.listProjects(1,100);d.value=l.data.projects}catch(l){console.error("Failed to fetch projects",l)}finally{p.value=!1}}async function g(){try{await f.createProject(o.value),a.value=!1,o.value={name:"",repositoryUrl:"",defaultBranch:"main"},await c()}catch(l){console.error("Failed to create project",l)}}async function w(l){if(confirm("Are you sure you want to delete this project?"))try{await f.deleteProject(l),await c()}catch(e){console.error("Failed to delete project",e)}}return P(c),(l,e)=>(r(),n("div",M,[t("header",$,[e[8]||(e[8]=t("div",null,[t("h1",null,"Projects"),t("p",{class:"subtitle"},"Manage your scanned projects")],-1)),t("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=s=>a.value=!0)},[...e[7]||(e[7]=[t("i",{class:"pi pi-plus"},null,-1),i(" New Project ",-1)])])]),p.value?(r(),n("div",D,[...e[9]||(e[9]=[t("i",{class:"pi pi-spin pi-spinner"},null,-1),i(" Loading projects... ",-1)])])):d.value.length===0?(r(),n("div",F,[e[10]||(e[10]=t("i",{class:"pi pi-folder-open"},null,-1)),e[11]||(e[11]=t("h3",null,"No projects yet",-1)),e[12]||(e[12]=t("p",null,"Create your first project to start scanning for license compliance.",-1)),t("button",{class:"btn btn-primary",onClick:e[1]||(e[1]=s=>a.value=!0)},"Create Project")])):(r(),n("div",L,[(r(!0),n(C,null,U(d.value,s=>(r(),n("div",{key:s.id,class:"project-card"},[t("div",R,[e[13]||(e[13]=t("i",{class:"pi pi-folder"},null,-1)),t("h3",null,y(s.name),1)]),t("div",S,[s.repositoryUrl?(r(),n("span",T,[e[14]||(e[14]=t("i",{class:"pi pi-github"},null,-1)),i(" "+y(s.repositoryUrl.split("/").slice(-1)[0]),1)])):b("",!0),t("span",_,[e[15]||(e[15]=t("i",{class:"pi pi-code-branch"},null,-1)),i(" "+y(s.defaultBranch),1)])]),t("div",q,[V(x(N),{to:`/projects/${s.id}`,class:"btn btn-small"},{default:B(()=>[...e[16]||(e[16]=[i(" View Details ",-1)])]),_:1},8,["to"]),t("button",{class:"btn btn-small btn-danger",onClick:O=>w(s.id)}," Delete ",8,A)])]))),128))])),a.value?(r(),n("div",{key:3,class:"modal-overlay",onClick:e[6]||(e[6]=j(s=>a.value=!1,["self"]))},[t("div",E,[e[21]||(e[21]=t("h2",null,"Create New Project",-1)),t("form",{onSubmit:j(g,["prevent"])},[t("div",I,[e[17]||(e[17]=t("label",{for:"name"},"Project Name",-1)),m(t("input",{id:"name","onUpdate:modelValue":e[2]||(e[2]=s=>o.value.name=s),type:"text",required:"",placeholder:"My Project"},null,512),[[v,o.value.name]])]),t("div",z,[e[18]||(e[18]=t("label",{for:"repo"},"Repository URL (optional)",-1)),m(t("input",{id:"repo","onUpdate:modelValue":e[3]||(e[3]=s=>o.value.repositoryUrl=s),type:"url",placeholder:"https://github.com/user/repo"},null,512),[[v,o.value.repositoryUrl]])]),t("div",G,[e[19]||(e[19]=t("label",{for:"branch"},"Default Branch",-1)),m(t("input",{id:"branch","onUpdate:modelValue":e[4]||(e[4]=s=>o.value.defaultBranch=s),type:"text",placeholder:"main"},null,512),[[v,o.value.defaultBranch]])]),t("div",H,[t("button",{type:"button",class:"btn btn-secondary",onClick:e[5]||(e[5]=s=>a.value=!1)}," Cancel "),e[20]||(e[20]=t("button",{type:"submit",class:"btn btn-primary"},"Create",-1))])],32)])])):b("",!0)]))}}),W=h(J,[["__scopeId","data-v-7050a4e4"]]);export{W as default};
