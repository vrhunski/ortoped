import{d as R,o as w,c as o,b as m,r as c,a as e,e as r,F as y,i as b,j as h,u as j,R as S,t as a,f as C,h as p,l as D,n as L,k as i,_ as V}from"./index-x2f5C-rR.js";const x={class:"project-detail"},I={key:0,class:"loading"},N={class:"page-header"},P={class:"breadcrumb"},A={class:"project-meta"},B={key:0},F={class:"header-actions"},U=["disabled"],z=["disabled"],$={class:"section"},E={key:0,class:"empty-state"},H={key:1,class:"data-table"},M=R({__name:"ProjectDetailView",setup(T){const f=D(),l=c(null),d=c([]),v=c(!0),u=c(!1);async function _(){v.value=!0;try{const[n,t]=await Promise.all([p.getProject(f.params.id),p.listScans({projectId:f.params.id,pageSize:20})]);l.value=n.data,d.value=t.data.scans}catch(n){console.error("Failed to fetch project data",n)}finally{v.value=!1}}async function g(n=!1){if(l.value){u.value=!0;try{await p.triggerScan({projectId:l.value.id,enableAi:!0,demoMode:n});const t=await p.listScans({projectId:l.value.id,pageSize:20});d.value=t.data.scans}catch(t){console.error("Failed to trigger scan",t)}finally{u.value=!1}}}function k(n){switch(n){case"complete":return"status-success";case"scanning":return"status-warning";case"failed":return"status-error";default:return"status-pending"}}return w(_),(n,t)=>(i(),o("div",x,[v.value?(i(),o("div",I,[...t[2]||(t[2]=[e("i",{class:"pi pi-spin pi-spinner"},null,-1),r(" Loading... ",-1)])])):l.value?(i(),o(y,{key:1},[e("header",N,[e("div",null,[e("div",P,[b(j(S),{to:"/projects"},{default:h(()=>[...t[3]||(t[3]=[r("Projects",-1)])]),_:1}),t[4]||(t[4]=e("i",{class:"pi pi-angle-right"},null,-1)),e("span",null,a(l.value.name),1)]),e("h1",null,a(l.value.name),1),e("div",A,[l.value.repositoryUrl?(i(),o("span",B,[t[5]||(t[5]=e("i",{class:"pi pi-github"},null,-1)),r(" "+a(l.value.repositoryUrl),1)])):m("",!0),e("span",null,[t[6]||(t[6]=e("i",{class:"pi pi-code-branch"},null,-1)),r(" "+a(l.value.defaultBranch),1)])])]),e("div",F,[e("button",{class:"btn btn-secondary",onClick:t[0]||(t[0]=s=>g(!0)),disabled:u.value},[...t[7]||(t[7]=[e("i",{class:"pi pi-play"},null,-1),r(" Demo Scan ",-1)])],8,U),e("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=s=>g(!1)),disabled:u.value||!l.value.repositoryUrl},[t[8]||(t[8]=e("i",{class:"pi pi-refresh"},null,-1)),r(" "+a(u.value?"Starting...":"Run Scan"),1)],8,z)])]),e("div",$,[t[12]||(t[12]=e("h2",null,"Scan History",-1)),d.value.length===0?(i(),o("div",E,[...t[9]||(t[9]=[e("p",null,"No scans yet. Run your first scan to see results here.",-1)])])):(i(),o("table",H,[t[11]||(t[11]=e("thead",null,[e("tr",null,[e("th",null,"Status"),e("th",null,"Dependencies"),e("th",null,"Resolved"),e("th",null,"Unresolved"),e("th",null,"AI Resolved"),e("th",null,"Completed"),e("th")])],-1)),e("tbody",null,[(i(!0),o(y,null,C(d.value,s=>(i(),o("tr",{key:s.id},[e("td",null,[e("span",{class:L(["status-badge",k(s.status)])},a(s.status),3)]),e("td",null,a(s.totalDependencies),1),e("td",null,a(s.resolvedLicenses),1),e("td",null,a(s.unresolvedLicenses),1),e("td",null,a(s.aiResolvedLicenses),1),e("td",null,a(s.completedAt?new Date(s.completedAt).toLocaleString():"-"),1),e("td",null,[b(j(S),{to:`/scans/${s.id}`,class:"btn btn-small"},{default:h(()=>[...t[10]||(t[10]=[r(" View ",-1)])]),_:1},8,["to"])])]))),128))])]))])],64)):m("",!0)]))}}),G=V(M,[["__scopeId","data-v-8c80176f"]]);export{G as default};
