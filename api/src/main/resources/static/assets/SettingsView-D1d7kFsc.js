import{d as m,o as k,c as l,a as e,b as A,r,t as d,g as K,v as w,e as v,F as C,f as P,h as y,k as a,_ as I}from"./index-DzC_UEuu.js";const x={class:"settings-page"},h={class:"section"},_={key:0,class:"new-key-alert"},D={class:"key-display"},N={class:"create-key-form"},V=["disabled"],F={key:1,class:"loading"},S={key:2,class:"data-table"},T=["onClick"],B={key:3,class:"empty-state"},L=m({__name:"SettingsView",setup(M){const u=r([]),p=r(!0),o=r(""),i=r(null);async function c(){p.value=!0;try{const s=await y.listApiKeys();u.value=s.data.apiKeys}catch(s){console.error("Failed to fetch API keys",s)}finally{p.value=!1}}async function b(){if(o.value)try{const s=await y.createApiKey(o.value);i.value=s.data.apiKey,o.value="",await c()}catch(s){console.error("Failed to create API key",s)}}async function g(s){if(confirm("Are you sure? This action cannot be undone."))try{await y.deleteApiKey(s),await c()}catch(t){console.error("Failed to delete API key",t)}}function f(s){navigator.clipboard.writeText(s)}return k(c),(s,t)=>(a(),l("div",x,[t[12]||(t[12]=e("header",{class:"page-header"},[e("h1",null,"Settings"),e("p",{class:"subtitle"},"Manage API keys and configuration")],-1)),e("div",h,[t[10]||(t[10]=e("h2",null,"API Keys",-1)),t[11]||(t[11]=e("p",{class:"section-description"},"Generate API keys for programmatic access to the OrtoPed API.",-1)),i.value?(a(),l("div",_,[t[4]||(t[4]=e("div",{class:"alert-header"},[e("i",{class:"pi pi-check-circle"}),e("strong",null,"API Key Created")],-1)),t[5]||(t[5]=e("p",null,"Copy this key now. You won't be able to see it again!",-1)),e("div",D,[e("code",null,d(i.value),1),e("button",{class:"btn-icon",onClick:t[0]||(t[0]=n=>f(i.value))},[...t[3]||(t[3]=[e("i",{class:"pi pi-copy"},null,-1)])])]),e("button",{class:"btn btn-small",onClick:t[1]||(t[1]=n=>i.value=null)},"Dismiss")])):A("",!0),e("div",N,[K(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>o.value=n),type:"text",placeholder:"Key name (e.g., CI Pipeline)",class:"input"},null,512),[[w,o.value]]),e("button",{class:"btn btn-primary",onClick:b,disabled:!o.value},[...t[6]||(t[6]=[e("i",{class:"pi pi-plus"},null,-1),v(" Create Key ",-1)])],8,V)]),p.value?(a(),l("div",F,[...t[7]||(t[7]=[e("i",{class:"pi pi-spin pi-spinner"},null,-1),v(" Loading... ",-1)])])):u.value.length>0?(a(),l("table",S,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Key Prefix"),e("th",null,"Created"),e("th")])],-1)),e("tbody",null,[(a(!0),l(C,null,P(u.value,n=>(a(),l("tr",{key:n.id},[e("td",null,[e("strong",null,d(n.name),1)]),e("td",null,[e("code",null,d(n.keyPrefix)+"...",1)]),e("td",null,d(new Date(n.createdAt).toLocaleDateString()),1),e("td",null,[e("button",{class:"btn btn-small btn-danger",onClick:$=>g(n.id)}," Delete ",8,T)])]))),128))])])):(a(),l("div",B,[...t[9]||(t[9]=[e("p",null,"No API keys yet. Create one to get started.",-1)])]))])]))}}),G=I(L,[["__scopeId","data-v-2a7a618c"]]);export{G as default};
