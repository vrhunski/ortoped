import{B as ys,l as je,Y as $e,s as _e,$ as Ue,m as ms,p as gs,q as bs,y as Cs,z as ws,H as O,k as n,j as C,g as Fe,a as s,A as Y,E as Ie,c as d,b as f,I as ks,Q as Es,T as Is,d as As,M as hs,N as Ss,o as Ps,i as o,r as k,e as x,F as z,u as t,R as Me,t as r,S as oe,X as Ls,G as V,V as Rs,h as F,f as re,_ as Os}from"./index-ClqzWbZM.js";import{s as M,a as b,b as H,e as ue,c as Ds,d as B}from"./column.esm-BbqAx-_5.js";import{s as de}from"./textarea.esm-l-9BGks3.js";import{s as we}from"./dialog.esm-BHhxsqSj.js";import{s as Vs}from"./progressbar.esm-CqPIb1Kh.js";import{s as xs,a as Pe}from"./tabpanel.esm-yrM2PYgA.js";import"./virtualscroller.esm-DDzwZ8vW.js";var Ts={root:function(p){var P=p.props;return"p-message p-component p-message-"+P.severity},wrapper:"p-message-wrapper",icon:"p-message-icon",text:"p-message-text",closeButton:"p-message-close p-link",closeIcon:"p-message-close-icon"},Ns=ys.extend({name:"message",classes:Ts}),js={name:"BaseMessage",extends:bs,props:{severity:{type:String,default:"info"},closable:{type:Boolean,default:!0},sticky:{type:Boolean,default:!0},life:{type:Number,default:3e3},icon:{type:String,default:void 0},closeIcon:{type:String,default:void 0},closeButtonProps:{type:null,default:null}},style:Ns,provide:function(){return{$parentInstance:this}}},ce={name:"Message",extends:js,inheritAttrs:!1,emits:["close","life-end"],timeout:null,data:function(){return{visible:!0}},watch:{sticky:function(p){p||this.closeAfterDelay()}},mounted:function(){this.sticky||this.closeAfterDelay()},methods:{close:function(p){this.visible=!1,this.$emit("close",p)},closeAfterDelay:function(){var p=this;setTimeout(function(){p.visible=!1,p.$emit("life-end")},this.life)}},computed:{iconComponent:function(){return{info:Ue,success:_e,warn:$e,error:je}[this.severity]},closeAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.close:void 0}},directives:{ripple:gs},components:{TimesIcon:ms,InfoCircleIcon:Ue,CheckIcon:_e,ExclamationTriangleIcon:$e,TimesCircleIcon:je}};function ke(u){"@babel/helpers - typeof";return ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},ke(u)}function Be(u,p){var P=Object.keys(u);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(u);p&&(g=g.filter(function(a){return Object.getOwnPropertyDescriptor(u,a).enumerable})),P.push.apply(P,g)}return P}function q(u){for(var p=1;p<arguments.length;p++){var P=arguments[p]!=null?arguments[p]:{};p%2?Be(Object(P),!0).forEach(function(g){$s(u,g,P[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(P)):Be(Object(P)).forEach(function(g){Object.defineProperty(u,g,Object.getOwnPropertyDescriptor(P,g))})}return u}function $s(u,p,P){return p=_s(p),p in u?Object.defineProperty(u,p,{value:P,enumerable:!0,configurable:!0,writable:!0}):u[p]=P,u}function _s(u){var p=Us(u,"string");return ke(p)=="symbol"?p:String(p)}function Us(u,p){if(ke(u)!="object"||!u)return u;var P=u[Symbol.toPrimitive];if(P!==void 0){var g=P.call(u,p);if(ke(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(u)}var Fs=["aria-label"];function Ms(u,p,P,g,a,D){var j=Cs("TimesIcon"),ve=ws("ripple");return n(),O(Is,Y({name:"p-message",appear:""},u.ptmi("transition")),{default:C(function(){return[Fe(s("div",Y({class:u.cx("root"),role:"alert","aria-live":"assertive","aria-atomic":"true"},u.ptm("root")),[u.$slots.container?Ie(u.$slots,"container",{key:0,onClose:D.close,closeCallback:D.close}):(n(),d("div",Y({key:1,class:u.cx("wrapper")},u.ptm("wrapper")),[Ie(u.$slots,"messageicon",{class:"p-message-icon"},function(){return[(n(),O(ks(u.icon?"span":D.iconComponent),Y({class:[u.cx("icon"),u.icon]},u.ptm("icon")),null,16,["class"]))]}),s("div",Y({class:["p-message-text",u.cx("text")]},u.ptm("text")),[Ie(u.$slots,"default")],16),u.closable?Fe((n(),d("button",Y({key:0,class:u.cx("closeButton"),"aria-label":D.closeAriaLabel,type:"button",onClick:p[0]||(p[0]=function(Ae){return D.close(Ae)})},q(q(q({},u.closeButtonProps),u.ptm("button")),u.ptm("closeButton"))),[Ie(u.$slots,"closeicon",{},function(){return[u.closeIcon?(n(),d("i",Y({key:0,class:[u.cx("closeIcon"),u.closeIcon]},q(q({},u.ptm("buttonIcon")),u.ptm("closeIcon"))),null,16)):(n(),O(j,Y({key:1,class:[u.cx("closeIcon"),u.closeIcon]},q(q({},u.ptm("buttonIcon")),u.ptm("closeIcon"))),null,16,["class"]))]})],16,Fs)),[[ve]]):f("",!0)],16))],16),[[Es,a.visible]])]}),_:3},16)}ce.render=Ms;const Bs={class:"curation-session"},Gs={key:0,class:"loading"},Js={class:"page-header"},Ys={class:"breadcrumb"},Hs={class:"session-meta"},Ws={class:"header-actions"},Xs={class:"progress-banner"},zs={class:"progress-info"},qs={class:"progress-text"},Ks={class:"progress-bar-container"},Qs={class:"stats-row"},Zs={class:"stat accepted"},el={class:"value"},sl={class:"stat rejected"},ll={class:"value"},il={class:"stat modified"},tl={class:"value"},al={class:"stat pending"},nl={class:"value"},ol={key:0,class:"approval-banner"},rl={key:0,class:"comment"},ul={class:"eu-warning-content"},dl={key:2,class:"pending-approval-banner"},cl={key:0},vl={class:"approval-actions"},pl={key:3,class:"readiness-banner"},fl={class:"readiness-header"},yl={class:"readiness-checks"},ml={key:0,class:"readiness-action"},gl={class:"toolbar"},bl={class:"filters"},Cl={key:0,class:"bulk-actions"},wl={key:0,class:"selected-count"},kl={class:"section"},El={class:"dependency-cell"},Il={class:"version"},Al={class:"scope"},hl={class:"license-badge original"},Sl={key:0,class:"ai-suggestion"},Pl={class:"suggested-license"},Ll={key:1,class:"no-suggestion"},Rl={key:0,class:"spdx-suggestion"},Ol={class:"suggested-license"},Dl={key:1,class:"no-suggestion"},Vl={key:0,class:"license-badge curated"},xl={key:1,class:"license-badge accepted"},Tl={key:2,class:"no-license"},Nl={key:0,class:"action-buttons"},jl={key:0,class:"item-detail"},$l={class:"detail-section"},_l={class:"info-grid"},Ul={class:"info-item"},Fl={class:"info-item"},Ml={class:"info-item"},Bl={class:"info-item"},Gl={class:"detail-section"},Jl={class:"license-comparison"},Yl={class:"license-box original"},Hl={class:"license-box suggested"},Wl={class:"license-box spdx"},Xl={key:0,class:"reasoning-box"},zl={key:0,class:"detail-section"},ql={class:"decision-form"},Kl={class:"action-selector"},Ql={key:0,class:"field"},Zl={class:"field"},ei={key:1,class:"detail-section"},si={class:"decision-summary"},li={key:0},ii={key:1},ti={key:2,class:"comment"},ai={key:0,class:"explanations-content"},ni={key:0,class:"explanation-section"},oi={class:"exp-header"},ri={class:"rule-name"},ui={class:"exp-reason"},di={key:0,class:"exp-detail"},ci={key:1,class:"exp-resolutions"},vi={key:1,class:"explanation-section"},pi={class:"exp-header"},fi={class:"obl-name"},yi={class:"exp-description"},mi={key:0,class:"exp-detail"},gi={key:1,class:"exp-detail"},bi={key:2,class:"explanation-section"},Ci={class:"exp-header"},wi={class:"exp-reason"},ki={key:0,class:"exp-detail"},Ei={key:3,class:"no-explanations"},Ii={key:1,class:"explanations-loading"},Ai={class:"justification-content"},hi={class:"justification-form"},Si={class:"form-row"},Pi={class:"field"},Li={class:"field"},Ri={class:"field"},Oi={class:"form-row"},Di={class:"field"},Vi={class:"field"},xi={class:"field"},Ti={class:"form-row"},Ni={class:"field"},ji={class:"field"},$i={class:"bulk-action-content"},_i={class:"action-selector"},Ui={class:"field"},Fi={class:"approve-content"},Mi={class:"approval-summary"},Bi={class:"summary-item"},Gi={class:"value"},Ji={class:"summary-item accepted"},Yi={class:"value"},Hi={class:"summary-item rejected"},Wi={class:"value"},Xi={class:"summary-item modified"},zi={class:"value"},qi={class:"form-row"},Ki={class:"field"},Qi={class:"field"},Zi={class:"field"},et={class:"submit-approval-content"},st={class:"readiness-summary"},lt={class:"checklist"},it={class:"check-item passed"},tt={class:"field"},at={class:"or-license-content"},nt={key:0,class:"or-license-list"},ot={class:"or-license-info"},rt={class:"license-expression"},ut={key:1,class:"or-license-resolver"},dt={class:"or-license-header"},ct={class:"version"},vt={class:"license-expression-display"},pt={class:"field"},ft={class:"license-options"},yt=["onClick"],mt={class:"license-id"},gt={class:"field"},bt=As({__name:"CurationSessionView",setup(u){const p=Rs(),P=Ls(),g=hs(),a=k(null),D=k([]),j=k([]),ve=k(!0),Ae=k(0),L=k(null),K=k([]),$=k(null),pe=k(null),fe=k(null),ye=k(null),me=k(""),Q=k(!1),ge=k(!1),W=k(!1),Z=k(!1),ee=k(!1),y=k(null),T=k(null),R=k(!1),se=k(""),le=k(""),ie=k(""),A=k("ACCEPT"),G=k(""),U=k(""),I=k({spdxId:"",licenseCategory:"PERMISSIVE",concludedLicense:"",justificationType:"AI_ACCEPTED",justificationText:"",evidenceType:"",evidenceReference:"",distributionScope:"BINARY"}),J=k(""),te=k(""),Ge=[{label:"All Statuses",value:null},{label:"Pending",value:"PENDING"},{label:"Accepted",value:"ACCEPTED"},{label:"Rejected",value:"REJECTED"},{label:"Modified",value:"MODIFIED"}],Je=[{label:"All Priorities",value:null},{label:"High",value:"HIGH"},{label:"Medium",value:"MEDIUM"},{label:"Low",value:"LOW"}],Ye=[{label:"All Confidence",value:null},{label:"High",value:"HIGH"},{label:"Medium",value:"MEDIUM"},{label:"Low",value:"LOW"}],He=[{label:"Permissive",value:"PERMISSIVE"},{label:"Weak Copyleft",value:"WEAK_COPYLEFT"},{label:"Strong Copyleft",value:"STRONG_COPYLEFT"},{label:"Network Copyleft (AGPL)",value:"NETWORK_COPYLEFT"},{label:"Proprietary",value:"PROPRIETARY"},{label:"Public Domain",value:"PUBLIC_DOMAIN"},{label:"Unknown",value:"UNKNOWN"}],We=[{label:"AI Accepted",value:"AI_ACCEPTED"},{label:"Manual Override",value:"MANUAL_OVERRIDE"},{label:"Evidence Based",value:"EVIDENCE_BASED"},{label:"Policy Exemption",value:"POLICY_EXEMPTION"},{label:"Legal Opinion",value:"LEGAL_OPINION"}],Xe=[{label:"None",value:""},{label:"License File",value:"LICENSE_FILE"},{label:"Repository Inspection",value:"REPO_INSPECTION"},{label:"Vendor Confirmation",value:"VENDOR_CONFIRMATION"},{label:"Legal Opinion",value:"LEGAL_OPINION"},{label:"Prior Audit",value:"PRIOR_AUDIT"},{label:"Package Metadata",value:"PACKAGE_METADATA"}],ze=[{label:"Internal Use Only",value:"INTERNAL"},{label:"Binary Distribution",value:"BINARY"},{label:"Source Distribution",value:"SOURCE"},{label:"SaaS / Cloud Service",value:"SAAS"},{label:"Embedded / Device",value:"EMBEDDED"}],qe=[{label:"Legal",value:"LEGAL"},{label:"Compliance",value:"COMPLIANCE"},{label:"Manager",value:"MANAGER"},{label:"Security",value:"SECURITY"}],Ke=oe(()=>!a.value||a.value.statistics.total===0?100:Math.round((a.value.statistics.total-a.value.statistics.pending)/a.value.statistics.total*100)),Le=oe(()=>{let i=[...D.value];if(pe.value&&(i=i.filter(c=>c.status===pe.value)),fe.value&&(i=i.filter(c=>{var m;return((m=c.priority)==null?void 0:m.level)===fe.value})),ye.value&&(i=i.filter(c=>{var m;return((m=c.aiSuggestion)==null?void 0:m.confidence)===ye.value})),me.value){const c=me.value.toLowerCase();i=i.filter(m=>{var S,l,v;return m.dependencyName.toLowerCase().includes(c)||((l=(S=m.aiSuggestion)==null?void 0:S.suggestedLicense)==null?void 0:l.toLowerCase().includes(c))||((v=m.originalConcludedLicense)==null?void 0:v.toLowerCase().includes(c))})}const e={HIGH:0,MEDIUM:1,LOW:2};return i.sort((c,m)=>{var v,h;if(c.status==="PENDING"&&m.status!=="PENDING")return-1;if(m.status==="PENDING"&&c.status!=="PENDING")return 1;const S=((v=c.priority)==null?void 0:v.level)||"LOW",l=((h=m.priority)==null?void 0:h.level)||"LOW";return(e[S]||2)-(e[l]||2)}),i}),Re=oe(()=>{var i;return(i=L.value)!=null&&i.readiness?L.value.readiness.isReady&&!L.value.isSubmittedForApproval:!1}),he=oe(()=>{var i;return((i=L.value)==null?void 0:i.isSubmittedForApproval)||!1}),Ee=oe(()=>{var c;if(!y.value)return!1;const i=G.value||((c=y.value.aiSuggestion)==null?void 0:c.suggestedLicense)||"";return["GPL","AGPL","LGPL","MPL","EPL","CDDL","Unknown","NOASSERTION","Proprietary"].some(m=>i.toUpperCase().includes(m.toUpperCase()))}),ae=oe(()=>K.value.filter(i=>!i.isResolved).length);async function ne(){ve.value=!0;try{const i=p.params.id,e=await F.getCurationSessionByScan(i);a.value=e.data;const c=await F.listCurationItems(a.value.scanId,{pageSize:500});D.value=c.data.items,Ae.value=c.data.total}catch(i){console.error("Failed to fetch curation data",i),g.add({severity:"error",summary:"Error",detail:"Failed to load curation session",life:3e3})}finally{ve.value=!1}}function Qe(i){var e;y.value=i,A.value=i.status==="PENDING"?"ACCEPT":i.status,G.value=i.curatedLicense||((e=i.aiSuggestion)==null?void 0:e.suggestedLicense)||"",U.value=i.curatorComment||"",Q.value=!0}async function Ze(){if(!(!y.value||!a.value)){R.value=!0;try{const i={action:A.value,curatedLicense:A.value==="MODIFY"?G.value:void 0,comment:U.value||void 0,curatorId:"curator"},e=await F.submitCurationDecision(a.value.scanId,y.value.dependencyId,i),c=D.value.findIndex(S=>S.id===y.value.id);c!==-1&&(D.value[c]=e.data);const m=await F.getCurationSession(a.value.scanId);a.value=m.data,Q.value=!1,g.add({severity:"success",summary:"Success",detail:"Decision saved",life:2e3})}catch(i){console.error("Failed to submit decision",i),g.add({severity:"error",summary:"Error",detail:"Failed to save decision",life:3e3})}finally{R.value=!1}}}function es(){if(j.value.length===0){g.add({severity:"warn",summary:"Warning",detail:"Select items first",life:2e3});return}A.value="ACCEPT",U.value="",ge.value=!0}async function ss(){if(!(j.value.length===0||!a.value)){R.value=!0;try{const i=j.value.map(c=>c.dependencyId),e={action:A.value,comment:U.value||void 0,curatorId:"curator"};await F.bulkCurationDecision(a.value.scanId,i,e),await ne(),j.value=[],ge.value=!1,g.add({severity:"success",summary:"Success",detail:`Updated ${i.length} items`,life:2e3})}catch(i){console.error("Failed to submit bulk decision",i),g.add({severity:"error",summary:"Error",detail:"Failed to update items",life:3e3})}finally{R.value=!1}}}async function ls(i){if(a.value)try{const e=await F.submitCurationDecision(a.value.scanId,i.dependencyId,{action:"ACCEPT",curatorId:"curator"}),c=D.value.findIndex(S=>S.id===i.id);c!==-1&&(D.value[c]=e.data);const m=await F.getCurationSession(a.value.scanId);a.value=m.data}catch(e){console.error("Failed to accept",e),g.add({severity:"error",summary:"Error",detail:"Failed to accept",life:2e3})}}async function is(i){if(a.value)try{const e=await F.submitCurationDecision(a.value.scanId,i.dependencyId,{action:"REJECT",curatorId:"curator"}),c=D.value.findIndex(S=>S.id===i.id);c!==-1&&(D.value[c]=e.data);const m=await F.getCurationSession(a.value.scanId);a.value=m.data}catch(e){console.error("Failed to reject",e),g.add({severity:"error",summary:"Error",detail:"Failed to reject",life:2e3})}}function Se(i){switch(i){case"ACCEPTED":return"success";case"REJECTED":return"danger";case"MODIFIED":return"info";case"PENDING":return"warning";default:return"secondary"}}function Oe(i){switch(i){case"CRITICAL":return"danger";case"HIGH":return"warning";case"MEDIUM":return"info";default:return"info"}}function De(i){switch(i){case"HIGH":return"confidence-high";case"MEDIUM":return"confidence-medium";default:return"confidence-low"}}function Ve(i){return i?"spdx-valid":"spdx-invalid"}Ss([pe,fe,ye,me],()=>{j.value=[]});async function be(){if(a.value)try{const i=await fetch(`/api/v1/scans/${a.value.scanId}/curation/approval/readiness`);i.ok&&(L.value=await i.json());const e=await fetch(`/api/v1/scans/${a.value.scanId}/curation/or-licenses`);if(e.ok){const c=await e.json();K.value=c.items||[]}}catch(i){console.error("Failed to fetch EU compliance data",i)}}async function ts(i){if(a.value)try{const e=await fetch(`/api/v1/scans/${a.value.scanId}/curation/items/${i}/explanations`);e.ok&&($.value=await e.json())}catch(e){console.error("Failed to fetch explanations",e),$.value=null}}async function as(){var i,e;if(!(!y.value||!a.value)){R.value=!0;try{const c={action:A.value,curatedLicense:A.value==="MODIFY"?G.value:void 0,comment:U.value||void 0,justification:Ee.value?{spdxId:I.value.spdxId||G.value||((i=y.value.aiSuggestion)==null?void 0:i.suggestedLicense),licenseCategory:I.value.licenseCategory,concludedLicense:I.value.concludedLicense||G.value||((e=y.value.aiSuggestion)==null?void 0:e.suggestedLicense),justificationType:I.value.justificationType,justificationText:I.value.justificationText,evidenceType:I.value.evidenceType||void 0,evidenceReference:I.value.evidenceReference||void 0,distributionScope:I.value.distributionScope}:void 0},m=await fetch(`/api/v1/scans/${a.value.scanId}/curation/items/${y.value.dependencyId}/decide`,{method:"POST",headers:{"Content-Type":"application/json","X-Curator-Id":"curator"},body:JSON.stringify(c)});if(!m.ok){const v=await m.json();throw new Error(v.error||"Failed to submit decision")}const S=await m.json(),l=D.value.findIndex(v=>v.id===y.value.id);l!==-1&&(D.value[l]=S.item),await ne(),await be(),Q.value=!1,us(),g.add({severity:"success",summary:"Success",detail:"Decision saved with justification",life:2e3})}catch(c){console.error("Failed to submit decision",c),g.add({severity:"error",summary:"Error",detail:c.message||"Failed to save decision",life:3e3})}finally{R.value=!1}}}async function ns(){if(a.value){R.value=!0;try{const i=await fetch(`/api/v1/scans/${a.value.scanId}/curation/submit-for-approval`,{method:"POST",headers:{"Content-Type":"application/json","X-Curator-Id":"curator"},body:JSON.stringify({comment:le.value||void 0})});if(!i.ok){const e=await i.json();throw new Error(e.error||"Failed to submit for approval")}await ne(),await be(),ee.value=!1,g.add({severity:"success",summary:"Success",detail:"Session submitted for approval",life:3e3})}catch(i){console.error("Failed to submit for approval",i),g.add({severity:"error",summary:"Error",detail:i.message||"Failed to submit for approval",life:3e3})}finally{R.value=!1}}}async function xe(i){if(!(!a.value||!se.value||!ie.value)){R.value=!0;try{const e=await fetch(`/api/v1/scans/${a.value.scanId}/curation/approval/decide`,{method:"POST",headers:{"Content-Type":"application/json","X-Approver-Id":"approver","X-Approver-Name":se.value,"X-Approver-Role":ie.value},body:JSON.stringify({decision:i,comment:le.value||void 0})});if(!e.ok){const m=await e.json();throw new Error(m.error||"Failed to process approval")}await ne(),await be(),W.value=!1;const c=i==="APPROVED"?"Session approved":"Session rejected";g.add({severity:i==="APPROVED"?"success":"warn",summary:c,detail:c,life:3e3})}catch(e){console.error("Failed to decide approval",e),g.add({severity:"error",summary:"Error",detail:e.message||"Failed to process approval",life:3e3})}finally{R.value=!1}}}async function os(){if(!(!a.value||!T.value||!J.value)){R.value=!0;try{const i=await fetch(`/api/v1/scans/${a.value.scanId}/curation/items/${T.value.dependencyId}/resolve-or`,{method:"POST",headers:{"Content-Type":"application/json","X-Curator-Id":"curator"},body:JSON.stringify({chosenLicense:J.value,reason:te.value})});if(!i.ok){const e=await i.json();throw new Error(e.error||"Failed to resolve OR license")}await ne(),await be(),Z.value=!1,T.value=null,J.value="",te.value="",g.add({severity:"success",summary:"Success",detail:"OR license resolved",life:2e3})}catch(i){console.error("Failed to resolve OR license",i),g.add({severity:"error",summary:"Error",detail:i.message||"Failed to resolve OR license",life:3e3})}finally{R.value=!1}}}function rs(i){T.value=i,J.value="",te.value="",Z.value=!0}function us(){I.value={spdxId:"",licenseCategory:"PERMISSIVE",concludedLicense:"",justificationType:"AI_ACCEPTED",justificationText:"",evidenceType:"",evidenceReference:"",distributionScope:"BINARY"}}async function Te(i){Qe(i),await ts(i.dependencyId)}async function ds(){if(a.value)try{const i=await fetch(`/api/v1/scans/${a.value.scanId}/curation/export/curations-yaml`);if(i.ok){const e=await i.json(),c=new Blob([e.content],{type:"text/yaml"}),m=URL.createObjectURL(c),S=document.createElement("a");S.href=m,S.download=e.filename||"curations.yml",S.click(),URL.revokeObjectURL(m),g.add({severity:"success",summary:"Exported",detail:"Curations YAML downloaded",life:2e3})}}catch(i){console.error("Failed to export curations",i),g.add({severity:"error",summary:"Error",detail:"Failed to export curations",life:3e3})}}async function cs(){if(a.value)try{const i=await fetch(`/api/v1/scans/${a.value.scanId}/curation/export/notice`);if(i.ok){const e=await i.json(),c=new Blob([e.content],{type:"text/plain"}),m=URL.createObjectURL(c),S=document.createElement("a");S.href=m,S.download=e.filename||"NOTICE",S.click(),URL.revokeObjectURL(m),g.add({severity:"success",summary:"Exported",detail:"NOTICE file downloaded",life:2e3})}}catch(i){console.error("Failed to export NOTICE",i),g.add({severity:"error",summary:"Error",detail:"Failed to export NOTICE",life:3e3})}}async function vs(){await ne(),await be()}return Ps(vs),(i,e)=>{var c,m,S;return n(),d("div",Bs,[ve.value?(n(),d("div",Gs,[...e[47]||(e[47]=[s("i",{class:"pi pi-spin pi-spinner"},null,-1),x(" Loading curation session... ",-1)])])):a.value?(n(),d(z,{key:1},[s("header",Js,[s("div",null,[s("div",Ys,[o(t(Me),{to:"/curations"},{default:C(()=>[...e[48]||(e[48]=[x("Curations",-1)])]),_:1}),e[49]||(e[49]=s("i",{class:"pi pi-angle-right"},null,-1)),e[50]||(e[50]=s("span",null,"Session Details",-1))]),e[52]||(e[52]=s("h1",null,"Curation Session",-1)),s("div",Hs,[o(t(M),{value:a.value.status,severity:Se(a.value.status)},null,8,["value","severity"]),s("span",null,"Created: "+r(new Date(a.value.createdAt).toLocaleString()),1),o(t(Me),{to:`/scans/${a.value.scanId}`,class:"scan-link"},{default:C(()=>[...e[51]||(e[51]=[s("i",{class:"pi pi-external-link"},null,-1),x(" View Scan ",-1)])]),_:1},8,["to"])])]),s("div",Ws,[Re.value?(n(),O(t(b),{key:0,label:"Submit for Approval",icon:"pi pi-send",severity:"success",onClick:e[0]||(e[0]=l=>ee.value=!0)})):f("",!0),he.value&&a.value.status!=="APPROVED"?(n(),O(t(b),{key:1,label:"Review & Approve",icon:"pi pi-check",severity:"success",onClick:e[1]||(e[1]=l=>W.value=!0)})):f("",!0),a.value.status==="APPROVED"?(n(),O(t(b),{key:2,label:"Export YAML",icon:"pi pi-file-export",severity:"secondary",onClick:ds})):f("",!0),a.value.status==="APPROVED"?(n(),O(t(b),{key:3,label:"Export NOTICE",icon:"pi pi-file",severity:"secondary",onClick:cs})):f("",!0),a.value.status==="APPROVED"?(n(),O(t(b),{key:4,label:"View Scan",icon:"pi pi-external-link",severity:"secondary",onClick:e[2]||(e[2]=l=>t(P).push(`/scans/${a.value.scanId}`))})):f("",!0)])]),s("div",Xs,[s("div",zs,[e[53]||(e[53]=s("h3",null,"Progress",-1)),s("span",qs,r(a.value.statistics.total-a.value.statistics.pending)+" of "+r(a.value.statistics.total)+" items reviewed ",1)]),s("div",Ks,[o(t(Vs),{value:Ke.value,style:{height:"12px"}},null,8,["value"])]),s("div",Qs,[s("div",Zs,[e[54]||(e[54]=s("i",{class:"pi pi-check"},null,-1)),s("span",el,r(a.value.statistics.accepted),1),e[55]||(e[55]=s("span",{class:"label"},"Accepted",-1))]),s("div",sl,[e[56]||(e[56]=s("i",{class:"pi pi-times"},null,-1)),s("span",ll,r(a.value.statistics.rejected),1),e[57]||(e[57]=s("span",{class:"label"},"Rejected",-1))]),s("div",il,[e[58]||(e[58]=s("i",{class:"pi pi-pencil"},null,-1)),s("span",tl,r(a.value.statistics.modified),1),e[59]||(e[59]=s("span",{class:"label"},"Modified",-1))]),s("div",al,[e[60]||(e[60]=s("i",{class:"pi pi-clock"},null,-1)),s("span",nl,r(a.value.statistics.pending),1),e[61]||(e[61]=s("span",{class:"label"},"Pending",-1))])])]),a.value.status==="APPROVED"&&a.value.approval?(n(),d("div",ol,[e[63]||(e[63]=s("i",{class:"pi pi-check-circle"},null,-1)),s("div",null,[e[62]||(e[62]=s("strong",null,"Session Approved",-1)),s("p",null,"Approved by "+r(a.value.approval.approvedBy)+" on "+r(new Date(a.value.approval.approvedAt).toLocaleString()),1),a.value.approval.comment?(n(),d("p",rl,r(a.value.approval.comment),1)):f("",!0)])])):f("",!0),ae.value>0?(n(),O(t(ce),{key:1,severity:"warn",closable:!1,class:"eu-message"},{default:C(()=>[s("div",ul,[e[65]||(e[65]=s("i",{class:"pi pi-exclamation-triangle"},null,-1)),s("div",null,[s("strong",null,r(ae.value)+" Unresolved OR License(s)",1),e[64]||(e[64]=s("p",null,'Some dependencies have dual/multi-licensed options (e.g., "GPL-2.0 OR MIT"). You must explicitly choose which license applies before approval.',-1))]),o(t(b),{label:"Resolve OR Licenses",icon:"pi pi-list",severity:"warning",size:"small",onClick:e[3]||(e[3]=l=>{Z.value=!0,T.value=K.value.find(v=>!v.isResolved)})})])]),_:1})):f("",!0),he.value&&a.value.status!=="APPROVED"?(n(),d("div",dl,[e[68]||(e[68]=s("i",{class:"pi pi-clock"},null,-1)),s("div",null,[e[66]||(e[66]=s("strong",null,"Awaiting Approval",-1)),e[67]||(e[67]=s("p",null,"This session has been submitted for approval and is awaiting review by a different person (EU four-eyes principle).",-1)),(c=L.value)!=null&&c.submittedBy?(n(),d("p",cl,"Submitted by: "+r(L.value.submittedBy),1)):f("",!0)]),s("div",vl,[o(t(b),{label:"Approve",icon:"pi pi-check",severity:"success",size:"small",onClick:e[4]||(e[4]=l=>W.value=!0)}),o(t(b),{label:"Reject",icon:"pi pi-times",severity:"danger",size:"small",outlined:"",onClick:e[5]||(e[5]=l=>W.value=!0)})])])):f("",!0),(m=L.value)!=null&&m.readiness&&!he.value&&a.value.status!=="APPROVED"?(n(),d("div",pl,[s("div",fl,[e[69]||(e[69]=s("h4",null,"Approval Readiness",-1)),o(t(M),{value:L.value.readiness.isReady?"Ready":"Not Ready",severity:L.value.readiness.isReady?"success":"warning"},null,8,["value","severity"])]),s("div",yl,[s("div",{class:V(["check-item",{passed:L.value.readiness.allItemsCurated}])},[s("i",{class:V(L.value.readiness.allItemsCurated?"pi pi-check-circle":"pi pi-circle")},null,2),s("span",null,"All items curated ("+r(a.value.statistics.total-a.value.statistics.pending)+"/"+r(a.value.statistics.total)+")",1)],2),s("div",{class:V(["check-item",{passed:L.value.readiness.allJustificationsComplete}])},[s("i",{class:V(L.value.readiness.allJustificationsComplete?"pi pi-check-circle":"pi pi-circle")},null,2),s("span",null,"All justifications complete ("+r(L.value.readiness.justificationsComplete||0)+"/"+r(L.value.readiness.justificationsRequired||0)+")",1)],2),s("div",{class:V(["check-item",{passed:L.value.readiness.allOrLicensesResolved}])},[s("i",{class:V(L.value.readiness.allOrLicensesResolved?"pi pi-check-circle":"pi pi-circle")},null,2),s("span",null,"All OR licenses resolved ("+r((K.value.length||0)-ae.value)+"/"+r(K.value.length||0)+")",1)],2)]),Re.value?(n(),d("div",ml,[o(t(b),{label:"Submit for Approval",icon:"pi pi-send",severity:"success",onClick:e[6]||(e[6]=l=>ee.value=!0)})])):f("",!0)])):f("",!0),s("div",gl,[s("div",bl,[o(t(H),{modelValue:pe.value,"onUpdate:modelValue":e[7]||(e[7]=l=>pe.value=l),options:Ge,optionLabel:"label",optionValue:"value",placeholder:"Status",class:"filter-dropdown"},null,8,["modelValue"]),o(t(H),{modelValue:fe.value,"onUpdate:modelValue":e[8]||(e[8]=l=>fe.value=l),options:Je,optionLabel:"label",optionValue:"value",placeholder:"Priority",class:"filter-dropdown"},null,8,["modelValue"]),o(t(H),{modelValue:ye.value,"onUpdate:modelValue":e[9]||(e[9]=l=>ye.value=l),options:Ye,optionLabel:"label",optionValue:"value",placeholder:"Confidence",class:"filter-dropdown"},null,8,["modelValue"]),o(t(ue),{modelValue:me.value,"onUpdate:modelValue":e[10]||(e[10]=l=>me.value=l),placeholder:"Search dependencies...",class:"search-input"},null,8,["modelValue"])]),a.value.status!=="APPROVED"?(n(),d("div",Cl,[j.value.length>0?(n(),d("span",wl,r(j.value.length)+" selected ",1)):f("",!0),o(t(b),{label:"Bulk Action",icon:"pi pi-list",severity:"secondary",disabled:j.value.length===0,onClick:es},null,8,["disabled"])])):f("",!0)]),s("div",kl,[o(t(Ds),{selection:j.value,"onUpdate:selection":e[11]||(e[11]=l=>j.value=l),value:Le.value,stripedRows:"",showGridlines:"",class:"p-datatable-sm",paginator:Le.value.length>20,rows:20,dataKey:"id",selectionMode:(a.value.status!=="APPROVED",void 0)},{default:C(()=>[a.value.status!=="APPROVED"?(n(),O(t(B),{key:0,selectionMode:"multiple",style:{width:"50px"}})):f("",!0),o(t(B),{field:"dependencyName",header:"Dependency",style:{"min-width":"250px"},sortable:""},{body:C(({data:l})=>[s("div",El,[s("strong",null,r(l.dependencyName),1),s("span",Il,"@"+r(l.dependencyVersion),1),s("div",Al,r(l.scope),1)])]),_:1}),o(t(B),{header:"Original License",style:{width:"150px"}},{body:C(({data:l})=>[s("span",hl,r(l.originalConcludedLicense||"Unknown"),1)]),_:1}),o(t(B),{header:"AI Suggestion",style:{"min-width":"200px"}},{body:C(({data:l})=>{var v;return[(v=l.aiSuggestion)!=null&&v.suggestedLicense?(n(),d("div",Sl,[s("span",Pl,r(l.aiSuggestion.suggestedLicense),1),s("span",{class:V(["confidence",De(l.aiSuggestion.confidence)])},r(l.aiSuggestion.confidence),3)])):(n(),d("span",Ll,"No AI suggestion"))]}),_:1}),o(t(B),{header:"SPDX Suggestion",style:{"min-width":"200px"}},{body:C(({data:l})=>{var v;return[(v=l.spdxSuggestion)!=null&&v.licenseId?(n(),d("div",Rl,[s("span",Ol,r(l.spdxSuggestion.licenseId),1),s("span",{class:V(["spdx-badge",Ve(l.spdxValidated)])},r(l.spdxValidated?"✓ Valid":"⚠ Invalid"),3)])):(n(),d("span",Dl,"No SPDX suggestion"))]}),_:1}),o(t(B),{field:"priority",header:"Priority",style:{width:"100px"},sortable:""},{body:C(({data:l})=>{var v,h;return[o(t(M),{value:(v=l.priority)==null?void 0:v.level,severity:Oe((h=l.priority)==null?void 0:h.level)},null,8,["value","severity"])]}),_:1}),o(t(B),{field:"status",header:"Status",style:{width:"110px"},sortable:""},{body:C(({data:l})=>[o(t(M),{value:l.status,severity:Se(l.status)},null,8,["value","severity"])]),_:1}),o(t(B),{header:"Final License",style:{width:"150px"}},{body:C(({data:l})=>{var v;return[l.curatedLicense?(n(),d("span",Vl,r(l.curatedLicense),1)):l.status==="ACCEPTED"?(n(),d("span",xl,r((v=l.aiSuggestion)==null?void 0:v.suggestedLicense),1)):(n(),d("span",Tl,"-"))]}),_:1}),o(t(B),{header:"Actions",style:{width:"150px"}},{body:C(({data:l})=>{var v;return[((v=a.value)==null?void 0:v.status)!=="APPROVED"?(n(),d("div",Nl,[l.status==="PENDING"?(n(),O(t(b),{key:0,icon:"pi pi-check",severity:"success",text:"",rounded:"",size:"small",onClick:h=>ls(l),title:"Accept"},null,8,["onClick"])):f("",!0),l.status==="PENDING"?(n(),O(t(b),{key:1,icon:"pi pi-times",severity:"danger",text:"",rounded:"",size:"small",onClick:h=>is(l),title:"Reject"},null,8,["onClick"])):f("",!0),o(t(b),{icon:"pi pi-pencil",severity:"secondary",text:"",rounded:"",size:"small",onClick:h=>Te(l),title:"Edit with Explanations"},null,8,["onClick"])])):(n(),O(t(b),{key:1,icon:"pi pi-eye",severity:"secondary",text:"",rounded:"",size:"small",onClick:h=>Te(l),title:"View Details"},null,8,["onClick"]))]}),_:1})]),_:1},8,["selection","value","paginator","selectionMode"])])],64)):f("",!0),o(t(we),{visible:Q.value,"onUpdate:visible":e[27]||(e[27]=l=>Q.value=l),header:((S=y.value)==null?void 0:S.dependencyName)||"Item Details",modal:!0,style:{width:"900px"}},{footer:C(()=>{var l;return[o(t(b),{label:"Cancel",severity:"secondary",onClick:e[25]||(e[25]=v=>Q.value=!1)}),((l=a.value)==null?void 0:l.status)!=="APPROVED"?(n(),O(t(b),{key:0,label:Ee.value?"Save with Justification":"Save Decision",icon:"pi pi-check",onClick:e[26]||(e[26]=v=>Ee.value?as():Ze()),loading:R.value},null,8,["label","loading"])):f("",!0)]}),default:C(()=>[y.value?(n(),d("div",jl,[o(t(xs),null,{default:C(()=>{var l;return[o(t(Pe),{header:"Decision"},{default:C(()=>{var v,h,E,N,X,Ce,w;return[s("div",$l,[e[74]||(e[74]=s("h4",null,"Dependency Information",-1)),s("div",_l,[s("div",Ul,[e[70]||(e[70]=s("label",null,"Name",-1)),s("span",null,r(y.value.dependencyName),1)]),s("div",Fl,[e[71]||(e[71]=s("label",null,"Version",-1)),s("span",null,r(y.value.dependencyVersion),1)]),s("div",Ml,[e[72]||(e[72]=s("label",null,"Scope",-1)),s("span",null,r(y.value.scope),1)]),s("div",Bl,[e[73]||(e[73]=s("label",null,"Priority",-1)),o(t(M),{value:(v=y.value.priority)==null?void 0:v.level,severity:Oe((h=y.value.priority)==null?void 0:h.level)},null,8,["value","severity"])])])]),s("div",Gl,[e[81]||(e[81]=s("h4",null,"License Information",-1)),s("div",Jl,[s("div",Yl,[e[75]||(e[75]=s("label",null,"Original License",-1)),s("span",null,r(y.value.originalConcludedLicense||"Unknown"),1)]),e[78]||(e[78]=s("i",{class:"pi pi-arrow-right"},null,-1)),s("div",Hl,[e[76]||(e[76]=s("label",null,"AI Suggested",-1)),s("span",null,r(((E=y.value.aiSuggestion)==null?void 0:E.suggestedLicense)||"None"),1),(N=y.value.aiSuggestion)!=null&&N.confidence?(n(),d("span",{key:0,class:V(["confidence-badge",De(y.value.aiSuggestion.confidence)])},r(y.value.aiSuggestion.confidence),3)):f("",!0)]),e[79]||(e[79]=s("i",{class:"pi pi-arrow-right"},null,-1)),s("div",Wl,[e[77]||(e[77]=s("label",null,"SPDX Suggested",-1)),s("span",null,r(((X=y.value.spdxLicense)==null?void 0:X.licenseId)||"None"),1),y.value.spdxLicense?(n(),d("span",{key:0,class:V(["spdx-badge",Ve(y.value.spdxValidated)])},r(y.value.spdxValidated?"✓ Valid":"⚠ Invalid"),3)):f("",!0)])]),(Ce=y.value.aiSuggestion)!=null&&Ce.reasoning?(n(),d("div",Xl,[e[80]||(e[80]=s("label",null,"AI Reasoning",-1)),s("p",null,r(y.value.aiSuggestion.reasoning),1)])):f("",!0)]),((w=a.value)==null?void 0:w.status)!=="APPROVED"?(n(),d("div",zl,[e[84]||(e[84]=s("h4",null,"Your Decision",-1)),s("div",ql,[s("div",Kl,[o(t(b),{label:"Accept",severity:A.value==="ACCEPT"?"success":"secondary",outlined:A.value!=="ACCEPT",onClick:e[12]||(e[12]=_=>A.value="ACCEPT")},null,8,["severity","outlined"]),o(t(b),{label:"Reject",severity:A.value==="REJECT"?"danger":"secondary",outlined:A.value!=="REJECT",onClick:e[13]||(e[13]=_=>A.value="REJECT")},null,8,["severity","outlined"]),o(t(b),{label:"Modify",severity:A.value==="MODIFY"?"info":"secondary",outlined:A.value!=="MODIFY",onClick:e[14]||(e[14]=_=>A.value="MODIFY")},null,8,["severity","outlined"])]),A.value==="MODIFY"?(n(),d("div",Ql,[e[82]||(e[82]=s("label",null,"Custom License",-1)),o(t(ue),{modelValue:G.value,"onUpdate:modelValue":e[15]||(e[15]=_=>G.value=_),placeholder:"Enter SPDX license ID...",class:"w-full"},null,8,["modelValue"])])):f("",!0),s("div",Zl,[e[83]||(e[83]=s("label",null,"Comment (optional)",-1)),o(t(de),{modelValue:U.value,"onUpdate:modelValue":e[16]||(e[16]=_=>U.value=_),rows:"2",class:"w-full",placeholder:"Add a note about this decision..."},null,8,["modelValue"])])])])):(n(),d("div",ei,[e[85]||(e[85]=s("h4",null,"Decision",-1)),s("div",si,[o(t(M),{value:y.value.status,severity:Se(y.value.status)},null,8,["value","severity"]),y.value.curatedLicense?(n(),d("span",li,"License: "+r(y.value.curatedLicense),1)):f("",!0),y.value.curatorId?(n(),d("span",ii,"By: "+r(y.value.curatorId),1)):f("",!0),y.value.curatorComment?(n(),d("p",ti,r(y.value.curatorComment),1)):f("",!0)])]))]}),_:1}),o(t(Pe),{header:"Explanations"},{default:C(()=>{var v,h,E,N,X,Ce;return[$.value?(n(),d("div",ai,[(v=$.value.whyNotExplanations)!=null&&v.length?(n(),d("div",ni,[e[88]||(e[88]=s("h4",null,[s("i",{class:"pi pi-question-circle"}),x(" Why Not? Policy Violations")],-1)),(n(!0),d(z,null,re($.value.whyNotExplanations,(w,_)=>{var Ne;return n(),d("div",{key:_,class:"explanation-card violation"},[s("div",oi,[o(t(M),{value:w.severity,severity:w.severity==="ERROR"?"danger":"warning"},null,8,["value","severity"]),s("span",ri,r(w.ruleName),1)]),s("p",ui,r(w.reason),1),w.legalBasis?(n(),d("div",di,[e[86]||(e[86]=s("strong",null,"Legal Basis:",-1)),x(" "+r(w.legalBasis),1)])):f("",!0),(Ne=w.resolutions)!=null&&Ne.length?(n(),d("div",ci,[e[87]||(e[87]=s("strong",null,"Possible Resolutions:",-1)),s("ul",null,[(n(!0),d(z,null,re(w.resolutions,(ps,fs)=>(n(),d("li",{key:fs},r(ps),1))),128))])])):f("",!0)])}),128))])):f("",!0),(h=$.value.obligations)!=null&&h.length?(n(),d("div",vi,[e[91]||(e[91]=s("h4",null,[s("i",{class:"pi pi-list-check"}),x(" License Obligations")],-1)),(n(!0),d(z,null,re($.value.obligations,(w,_)=>(n(),d("div",{key:_,class:"explanation-card obligation"},[s("div",pi,[o(t(M),{value:w.effort,severity:w.effort==="HIGH"?"danger":w.effort==="MEDIUM"?"warning":"info"},null,8,["value","severity"]),s("span",fi,r(w.name),1)]),s("p",yi,r(w.description),1),w.scope?(n(),d("div",mi,[e[89]||(e[89]=s("strong",null,"Scope:",-1)),x(" "+r(w.scope),1)])):f("",!0),w.trigger?(n(),d("div",gi,[e[90]||(e[90]=s("strong",null,"Trigger:",-1)),x(" "+r(w.trigger),1)])):f("",!0)]))),128))])):f("",!0),(E=$.value.compatibilityIssues)!=null&&E.length?(n(),d("div",bi,[e[93]||(e[93]=s("h4",null,[s("i",{class:"pi pi-exclamation-triangle"}),x(" Compatibility Issues")],-1)),(n(!0),d(z,null,re($.value.compatibilityIssues,(w,_)=>(n(),d("div",{key:_,class:"explanation-card compatibility"},[s("div",Ci,[o(t(M),{value:w.severity,severity:w.severity==="BLOCKING"?"danger":"warning"},null,8,["value","severity"]),s("span",null,r(w.license1)+" ↔ "+r(w.license2),1)]),s("p",wi,r(w.reason),1),w.affectedDependency?(n(),d("div",ki,[e[92]||(e[92]=s("strong",null,"Affected:",-1)),x(" "+r(w.affectedDependency),1)])):f("",!0)]))),128))])):f("",!0),!((N=$.value.whyNotExplanations)!=null&&N.length)&&!((X=$.value.obligations)!=null&&X.length)&&!((Ce=$.value.compatibilityIssues)!=null&&Ce.length)?(n(),d("div",Ei,[...e[94]||(e[94]=[s("i",{class:"pi pi-check-circle"},null,-1),s("p",null,"No policy violations, obligations, or compatibility issues found for this dependency.",-1)])])):f("",!0)])):(n(),d("div",Ii,[...e[95]||(e[95]=[s("i",{class:"pi pi-spin pi-spinner"},null,-1),x(" Loading explanations... ",-1)])]))]}),_:1}),((l=a.value)==null?void 0:l.status)!=="APPROVED"?(n(),O(t(Pe),{key:0,header:"Justification"},{default:C(()=>{var v,h;return[s("div",Ai,[Ee.value?(n(),O(t(ce),{key:0,severity:"info",closable:!1},{default:C(()=>[...e[96]||(e[96]=[s("strong",null,"EU Compliance:",-1),x(" This license requires a structured justification for audit purposes. ",-1)])]),_:1})):f("",!0),s("div",hi,[s("div",Si,[s("div",Pi,[e[97]||(e[97]=s("label",null,"SPDX License ID *",-1)),o(t(ue),{modelValue:I.value.spdxId,"onUpdate:modelValue":e[17]||(e[17]=E=>I.value.spdxId=E),placeholder:((v=y.value.aiSuggestion)==null?void 0:v.suggestedLicense)||"e.g., MIT, GPL-3.0-only",class:"w-full"},null,8,["modelValue","placeholder"])]),s("div",Li,[e[98]||(e[98]=s("label",null,"License Category *",-1)),o(t(H),{modelValue:I.value.licenseCategory,"onUpdate:modelValue":e[18]||(e[18]=E=>I.value.licenseCategory=E),options:He,optionLabel:"label",optionValue:"value",class:"w-full"},null,8,["modelValue"])])]),s("div",Ri,[e[99]||(e[99]=s("label",null,"Concluded License *",-1)),o(t(ue),{modelValue:I.value.concludedLicense,"onUpdate:modelValue":e[19]||(e[19]=E=>I.value.concludedLicense=E),placeholder:((h=y.value.aiSuggestion)==null?void 0:h.suggestedLicense)||"Final license determination",class:"w-full"},null,8,["modelValue","placeholder"])]),s("div",Oi,[s("div",Di,[e[100]||(e[100]=s("label",null,"Justification Type *",-1)),o(t(H),{modelValue:I.value.justificationType,"onUpdate:modelValue":e[20]||(e[20]=E=>I.value.justificationType=E),options:We,optionLabel:"label",optionValue:"value",class:"w-full"},null,8,["modelValue"])]),s("div",Vi,[e[101]||(e[101]=s("label",null,"Distribution Scope *",-1)),o(t(H),{modelValue:I.value.distributionScope,"onUpdate:modelValue":e[21]||(e[21]=E=>I.value.distributionScope=E),options:ze,optionLabel:"label",optionValue:"value",class:"w-full"},null,8,["modelValue"])])]),s("div",xi,[e[102]||(e[102]=s("label",null,"Justification Text *",-1)),o(t(de),{modelValue:I.value.justificationText,"onUpdate:modelValue":e[22]||(e[22]=E=>I.value.justificationText=E),rows:"3",class:"w-full",placeholder:"Explain why this license determination is correct and acceptable for your use case..."},null,8,["modelValue"])]),s("div",Ti,[s("div",Ni,[e[103]||(e[103]=s("label",null,"Evidence Type",-1)),o(t(H),{modelValue:I.value.evidenceType,"onUpdate:modelValue":e[23]||(e[23]=E=>I.value.evidenceType=E),options:Xe,optionLabel:"label",optionValue:"value",class:"w-full"},null,8,["modelValue"])]),s("div",ji,[e[104]||(e[104]=s("label",null,"Evidence Reference",-1)),o(t(ue),{modelValue:I.value.evidenceReference,"onUpdate:modelValue":e[24]||(e[24]=E=>I.value.evidenceReference=E),placeholder:"URL or document reference...",class:"w-full"},null,8,["modelValue"])])])])])]}),_:1})):f("",!0)]}),_:1})])):f("",!0)]),_:1},8,["visible","header"]),o(t(we),{visible:ge.value,"onUpdate:visible":e[32]||(e[32]=l=>ge.value=l),header:"Bulk Action",modal:!0,style:{width:"500px"}},{footer:C(()=>[o(t(b),{label:"Cancel",severity:"secondary",onClick:e[31]||(e[31]=l=>ge.value=!1)}),o(t(b),{label:"Apply",icon:"pi pi-check",severity:A.value==="ACCEPT"?"success":"danger",onClick:ss,loading:R.value},null,8,["severity","loading"])]),default:C(()=>[s("div",$i,[s("p",null,"Apply action to "+r(j.value.length)+" selected items:",1),s("div",_i,[o(t(b),{label:"Accept All",severity:A.value==="ACCEPT"?"success":"secondary",outlined:A.value!=="ACCEPT",onClick:e[28]||(e[28]=l=>A.value="ACCEPT")},null,8,["severity","outlined"]),o(t(b),{label:"Reject All",severity:A.value==="REJECT"?"danger":"secondary",outlined:A.value!=="REJECT",onClick:e[29]||(e[29]=l=>A.value="REJECT")},null,8,["severity","outlined"])]),s("div",Ui,[e[105]||(e[105]=s("label",null,"Comment (optional)",-1)),o(t(de),{modelValue:U.value,"onUpdate:modelValue":e[30]||(e[30]=l=>U.value=l),rows:"2",class:"w-full",placeholder:"Add a note for all items..."},null,8,["modelValue"])])])]),_:1},8,["visible"]),o(t(we),{visible:W.value,"onUpdate:visible":e[39]||(e[39]=l=>W.value=l),header:"Review & Approve Curation Session",modal:!0,style:{width:"550px"}},{footer:C(()=>[o(t(b),{label:"Cancel",severity:"secondary",onClick:e[36]||(e[36]=l=>W.value=!1)}),o(t(b),{label:"Reject",icon:"pi pi-times",severity:"danger",outlined:"",onClick:e[37]||(e[37]=l=>xe("REJECTED")),loading:R.value,disabled:!se.value||!ie.value},null,8,["loading","disabled"]),o(t(b),{label:"Approve",icon:"pi pi-check",severity:"success",onClick:e[38]||(e[38]=l=>xe("APPROVED")),loading:R.value,disabled:!se.value||!ie.value},null,8,["loading","disabled"])]),default:C(()=>{var l,v,h,E;return[s("div",Fi,[o(t(ce),{severity:"info",closable:!1,class:"eu-notice"},{default:C(()=>[...e[106]||(e[106]=[s("strong",null,"EU Four-Eyes Principle:",-1),x(" The approver must be a different person than the curator who made the decisions. ",-1)])]),_:1}),e[114]||(e[114]=s("p",null,"You are reviewing this curation session for final approval. Please verify that all license decisions are correct and properly documented.",-1)),s("div",Mi,[s("div",Bi,[e[107]||(e[107]=s("span",{class:"label"},"Total Items",-1)),s("span",Gi,r((l=a.value)==null?void 0:l.statistics.total),1)]),s("div",Ji,[e[108]||(e[108]=s("span",{class:"label"},"Accepted",-1)),s("span",Yi,r((v=a.value)==null?void 0:v.statistics.accepted),1)]),s("div",Hi,[e[109]||(e[109]=s("span",{class:"label"},"Rejected",-1)),s("span",Wi,r((h=a.value)==null?void 0:h.statistics.rejected),1)]),s("div",Xi,[e[110]||(e[110]=s("span",{class:"label"},"Modified",-1)),s("span",zi,r((E=a.value)==null?void 0:E.statistics.modified),1)])]),s("div",qi,[s("div",Ki,[e[111]||(e[111]=s("label",null,"Your Name *",-1)),o(t(ue),{modelValue:se.value,"onUpdate:modelValue":e[33]||(e[33]=N=>se.value=N),placeholder:"Enter your name...",class:"w-full"},null,8,["modelValue"])]),s("div",Qi,[e[112]||(e[112]=s("label",null,"Your Role *",-1)),o(t(H),{modelValue:ie.value,"onUpdate:modelValue":e[34]||(e[34]=N=>ie.value=N),options:qe,optionLabel:"label",optionValue:"value",placeholder:"Select your role",class:"w-full"},null,8,["modelValue"])])]),s("div",Zi,[e[113]||(e[113]=s("label",null,"Comment (optional)",-1)),o(t(de),{modelValue:le.value,"onUpdate:modelValue":e[35]||(e[35]=N=>le.value=N),rows:"2",class:"w-full",placeholder:"Add approval notes..."},null,8,["modelValue"])])])]}),_:1},8,["visible"]),o(t(we),{visible:ee.value,"onUpdate:visible":e[42]||(e[42]=l=>ee.value=l),header:"Submit for Approval",modal:!0,style:{width:"500px"}},{footer:C(()=>[o(t(b),{label:"Cancel",severity:"secondary",onClick:e[41]||(e[41]=l=>ee.value=!1)}),o(t(b),{label:"Submit for Approval",icon:"pi pi-send",severity:"success",onClick:ns,loading:R.value},null,8,["loading"])]),default:C(()=>{var l,v,h,E,N;return[s("div",et,[o(t(ce),{severity:"info",closable:!1},{default:C(()=>[...e[115]||(e[115]=[s("strong",null,"EU Compliance:",-1),x(" After submission, a different person (approver) must review and sign off on all curation decisions. ",-1)])]),_:1}),s("div",st,[e[119]||(e[119]=s("h4",null,"Pre-Submission Checklist",-1)),s("div",lt,[s("div",it,[e[116]||(e[116]=s("i",{class:"pi pi-check-circle"},null,-1)),s("span",null,"All "+r((l=a.value)==null?void 0:l.statistics.total)+" items have been reviewed",1)]),s("div",{class:V(["check-item",{passed:(h=(v=L.value)==null?void 0:v.readiness)==null?void 0:h.allJustificationsComplete}])},[s("i",{class:V((N=(E=L.value)==null?void 0:E.readiness)!=null&&N.allJustificationsComplete?"pi pi-check-circle":"pi pi-exclamation-circle")},null,2),e[117]||(e[117]=s("span",null,"All required justifications are complete",-1))],2),s("div",{class:V(["check-item",{passed:ae.value===0}])},[s("i",{class:V(ae.value===0?"pi pi-check-circle":"pi pi-exclamation-circle")},null,2),e[118]||(e[118]=s("span",null,"All OR licenses have been resolved",-1))],2)])]),s("div",tt,[e[120]||(e[120]=s("label",null,"Submission Notes (optional)",-1)),o(t(de),{modelValue:le.value,"onUpdate:modelValue":e[40]||(e[40]=X=>le.value=X),rows:"3",class:"w-full",placeholder:"Add any notes for the approver..."},null,8,["modelValue"])])])]}),_:1},8,["visible"]),o(t(we),{visible:Z.value,"onUpdate:visible":e[46]||(e[46]=l=>Z.value=l),header:"Resolve OR License",modal:!0,style:{width:"600px"}},{footer:C(()=>[T.value?(n(),O(t(b),{key:0,label:"Back to List",severity:"secondary",onClick:e[44]||(e[44]=l=>T.value=null)})):f("",!0),o(t(b),{label:"Cancel",severity:"secondary",onClick:e[45]||(e[45]=l=>{Z.value=!1,T.value=null})}),T.value?(n(),O(t(b),{key:1,label:"Confirm Choice",icon:"pi pi-check",severity:"success",onClick:os,loading:R.value,disabled:!J.value||!te.value},null,8,["loading","disabled"])):f("",!0)]),default:C(()=>[s("div",at,[o(t(ce),{severity:"warn",closable:!1},{default:C(()=>[...e[121]||(e[121]=[s("strong",null,"Dual/Multi-License Resolution Required:",-1),x(" This dependency is available under multiple licenses. You must explicitly choose which license to use. ",-1)])]),_:1}),T.value?(n(),d("div",ut,[s("div",dt,[s("strong",null,r(T.value.dependencyName),1),s("span",ct,"@"+r(T.value.dependencyVersion),1)]),s("div",vt,[e[122]||(e[122]=s("label",null,"License Expression",-1)),s("code",null,r(T.value.originalLicense),1)]),s("div",pt,[e[123]||(e[123]=s("label",null,"Choose License *",-1)),s("div",ft,[(n(!0),d(z,null,re(T.value.licenseOptions,l=>(n(),d("div",{key:l,class:V(["license-option",{selected:J.value===l}]),onClick:v=>J.value=l},[s("i",{class:V(J.value===l?"pi pi-check-circle":"pi pi-circle")},null,2),s("span",mt,r(l),1)],10,yt))),128))])]),s("div",gt,[e[124]||(e[124]=s("label",null,"Reason for Choice *",-1)),o(t(de),{modelValue:te.value,"onUpdate:modelValue":e[43]||(e[43]=l=>te.value=l),rows:"3",class:"w-full",placeholder:"Explain why you chose this license (e.g., 'MIT is more permissive and aligns with our distribution model')"},null,8,["modelValue"])])])):(n(),d("div",nt,[s("h4",null,"Unresolved OR Licenses ("+r(ae.value)+")",1),(n(!0),d(z,null,re(K.value.filter(l=>!l.isResolved),l=>(n(),d("div",{key:l.dependencyId,class:"or-license-item"},[s("div",ot,[s("strong",null,r(l.dependencyName),1),s("span",rt,r(l.originalLicense),1)]),o(t(b),{label:"Resolve",icon:"pi pi-arrow-right",severity:"primary",size:"small",onClick:v=>rs(l)},null,8,["onClick"])]))),128))]))])]),_:1},8,["visible"])])}}}),St=Os(bt,[["__scopeId","data-v-88def6ca"]]);export{St as default};
